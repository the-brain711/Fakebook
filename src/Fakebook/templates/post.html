{% extends 'layout.html' %}

{% block title %}Fakebook - Post{% endblock %}

{% block content %}
{% if msg %}
<h3>{{ msg }}</h3>
{% else %}
<div class="box">
    <div class="box-details">
        <h4>{{ post['creator_name'] }}</h4>
        <label>{{ post['creation_date'] }}</label>
        <label>Likes: {{ post['likes'] }}</label>
    </div>
    <hr class="solid">
    <p>{{ post['description'] }}</p>
    <hr class="solid">

    <form class="box-comment" action="{{ url_for('views.comment') }}" method="post" autocomplete="on">
        <textarea rows="5" name="comment-textbox" id="comment-textbox" placeholder="What's on your mind {{ username }}?"
            maxlength="500" required></textarea>
        <input type="hidden" name="post-id" id="post-id" value="{{ post['post_id'] }}">
        <input type="submit" name="comment-submit" id="comment-submit" value="Comment" />
    </form>

    <div class="comment-area">
        <h4>Comments</h4>
        {% if post['comments'] %}
        {% for comment_id, comment in post['comments'].items() %}
        {% if comment['comment_replied_to'] == None %}
        <div class="comment">
            <div class="comment-details">
                <h4>{{ comment['commenter_name'] }}</h4>
                <label>{{ comment['creation_date'] }}</label>
            </div>
            <p>{{ comment['text'] }}</p>
            <hr class="solid">
            <form action="{{ url_for('views.reply') }}" method="post">
                <input type="hidden" name="post-id" id="post-id" value="{{ post['post_id'] }}">
                <input type="hidden" name="comment-id" id="post-id" value="{{ comment_id }}">
                <textarea rows="2" name="reply-textbox" id="reply-textbox" placeholder="Reply Here" maxlength="250"
                    required></textarea>
                <input type="submit" name="reply-submit" id="reply-submit" value="Reply" />
            </form>
        </div>
        {% endif %}
        {% endfor %}
        {% else %}
        <h4>No Comments...</h4>
        {% endif %}
    </div>
</div>
{% endif %}

{% endblock %}